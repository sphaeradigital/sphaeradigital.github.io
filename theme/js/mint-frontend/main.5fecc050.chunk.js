(this["webpackJsonpmint-frontend"]=this["webpackJsonpmint-frontend"]||[]).push([[0],{216:function(e,t){},266:function(e,t,n){"use strict";n.r(t);var a=n(146),s=n(12),i=n.n(s),r=n(111),o=n.n(r),c=n(123),u=n(66),p=n(281),d=n(191),l=n(193),y=n(0),m=n.n(y),b=n(151),h=n(127),f=n(72),j=n(101),x=n(152),v=n(44);n(154);var g,T=function(e,t,n){var a="https://etherscan.io";switch(n){case 3:a="https://ropsten.etherscan.io";break;case 42:a="https://kovan.etherscan.io";break;case 4:a="https://rinkeby.etherscan.io";break;case 5:a="https://goerli.etherscan.io"}return"tx"===t?"".concat(a,"/tx/").concat(e):"address"===t?"".concat(a,"/address/").concat(e):void console.error('getEtherscanLink should be provided either "tx" or "address" as the type')},O="0x77c29AE92Ab41cb1e53B95259AFb9BDbcC2ecDB7",k=f.utils.parseEther("0.005"),w="https://atlas.sphaera.digital/",M=n(15),I=["Standby","AwaitingWalletConfirmation","TransactionPending","MetadataPending","Success"],C=function(e,t){return I.indexOf(e.state)>I.indexOf(t)},S=function(){var e=Object(h.a)(m.a.mark((function e(t,n,a,s){var i,r,o,c,u,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.queryFilter(t.filters.Minted(n));case 2:i=e.sent,console.log({events:i}),r=[],o=Object(b.a)(i);try{for(o.s();!(c=o.n()).done;)(u=c.value).transactionHash===a&&(p=u.args.token_id,r.push(p.toNumber()))}catch(s){o.e(s)}finally{o.f()}return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,s){return e.apply(this,arguments)}}(),_=function(){var e=Object(h.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:n=e.sent,e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(0),console.error({exception:e.t0}),v.a(e.t0),e.abrupt("return",null);case 11:if(console.info({url:t,status:n.status}),!n.ok){e.next=19;break}return e.next=15,n.json();case 15:if(a=e.sent,console.info({metadata:a}),"string"!==typeof a.image){e.next=19;break}return e.abrupt("return",a);case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),A=function(e,t){var n=1===e.length?"a sphaera.digital NFT map #".concat(e[0].tokenId):"".concat(e.length," sphaera.digital NFT maps"),a="I have just minted ".concat(n,"!"),s=function(e,t){return"https://".concat(1===e?"":"testnets.","opensea.io/assets/").concat(O,"/").concat(t)}(t,e[0].tokenId);return"https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(a),"&url=").concat(encodeURIComponent(s),"&hashtags=").concat(encodeURIComponent("NFTs,NFTCommunity,OpenSeaNFT"),"&via=sphaeradigital")},E=function(e){if(e.startsWith("ipfs://")){var t=e.split("://")[1];return"https://sphaeradigital.mypinata.cloud/ipfs/".concat(t)}return e},N={state:"Standby",error:null},R=function(){var e=Object(u.useEthers)(),t=e.activateBrowserWallet,n=e.account,a=e.library,i=e.chainId,r=Object(u.useEtherBalance)(n),o=Object(s.useState)(N),c=Object(l.a)(o,2),p=c[0],d=c[1];return Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)("div",{className:"button-container",children:!n&&Object(M.jsx)("button",{className:"button",onClick:function(){return t()},children:"Connect your wallet"})}),Object(M.jsx)("div",{children:n&&i&&a&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("ul",{className:"divided",children:[Object(M.jsxs)("li",{children:["Your account: ",n]}),Object(M.jsxs)("li",{children:["Your Ether balance: ",r?"\u039e".concat(f.utils.formatEther(r)):"loading..."]}),Object(M.jsxs)("li",{children:["Each sphaera.digital map costs \u039e",f.utils.formatEther(k),"."]})]}),Object(M.jsx)(x.b,{initialValues:{tokenCount:10},onSubmit:function(){var e=Object(h.a)(m.a.mark((function e(t,s){var r,o,c,u,p,l,y,h,f,x,g,w,M,I,C,A;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.setSubmitting,e.prev=1,o=a.getSigner(),c=new j.a(O,'[{"inputs": [], "stateMutability": "nonpayable", "type": "constructor"}, {"anonymous": false, "inputs": [{"indexed": true, "internalType": "address", "name": "owner", "type": "address"}, {"indexed": true, "internalType": "address", "name": "approved", "type": "address"}, {"indexed": true, "internalType": "uint256", "name": "tokenId", "type": "uint256"}], "name": "Approval", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": true, "internalType": "address", "name": "owner", "type": "address"}, {"indexed": true, "internalType": "address", "name": "operator", "type": "address"}, {"indexed": false, "internalType": "bool", "name": "approved", "type": "bool"}], "name": "ApprovalForAll", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": true, "internalType": "address", "name": "to", "type": "address"}, {"indexed": false, "internalType": "uint256", "name": "token_id", "type": "uint256"}], "name": "Minted", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": true, "internalType": "address", "name": "previousOwner", "type": "address"}, {"indexed": true, "internalType": "address", "name": "newOwner", "type": "address"}], "name": "OwnershipTransferred", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": true, "internalType": "address", "name": "from", "type": "address"}, {"indexed": true, "internalType": "address", "name": "to", "type": "address"}, {"indexed": true, "internalType": "uint256", "name": "tokenId", "type": "uint256"}], "name": "Transfer", "type": "event"}, {"inputs": [], "name": "MAX_MINTS_PER_ADDRESS", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "MAX_TOKENS_PER_ADDRESS", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "METADATA_HASH", "outputs": [{"internalType": "string", "name": "", "type": "string"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "TOKEN_LIMIT", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "address", "name": "to", "type": "address"}, {"internalType": "uint256", "name": "tokenId", "type": "uint256"}], "name": "approve", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "address", "name": "owner", "type": "address"}], "name": "balanceOf", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "tokenId", "type": "uint256"}], "name": "getApproved", "outputs": [{"internalType": "address", "name": "", "type": "address"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "address", "name": "owner", "type": "address"}, {"internalType": "address", "name": "operator", "type": "address"}], "name": "isApprovedForAll", "outputs": [{"internalType": "bool", "name": "", "type": "bool"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "address", "name": "", "type": "address"}], "name": "limitsPerAddress", "outputs": [{"internalType": "uint8", "name": "tokens", "type": "uint8"}, {"internalType": "uint8", "name": "mints", "type": "uint8"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "address", "name": "_to", "type": "address"}, {"internalType": "uint8", "name": "_amount", "type": "uint8"}], "name": "mint", "outputs": [], "stateMutability": "payable", "type": "function"}, {"inputs": [{"internalType": "address", "name": "_to", "type": "address"}, {"internalType": "uint8", "name": "_amount", "type": "uint8"}], "name": "mintOwner", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [], "name": "name", "outputs": [{"internalType": "string", "name": "", "type": "string"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "owner", "outputs": [{"internalType": "address", "name": "", "type": "address"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "tokenId", "type": "uint256"}], "name": "ownerOf", "outputs": [{"internalType": "address", "name": "", "type": "address"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "renounceOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "address", "name": "from", "type": "address"}, {"internalType": "address", "name": "to", "type": "address"}, {"internalType": "uint256", "name": "tokenId", "type": "uint256"}], "name": "safeTransferFrom", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "address", "name": "from", "type": "address"}, {"internalType": "address", "name": "to", "type": "address"}, {"internalType": "uint256", "name": "tokenId", "type": "uint256"}, {"internalType": "bytes", "name": "_data", "type": "bytes"}], "name": "safeTransferFrom", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "address", "name": "operator", "type": "address"}, {"internalType": "bool", "name": "approved", "type": "bool"}], "name": "setApprovalForAll", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "bytes4", "name": "interfaceId", "type": "bytes4"}], "name": "supportsInterface", "outputs": [{"internalType": "bool", "name": "", "type": "bool"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "symbol", "outputs": [{"internalType": "string", "name": "", "type": "string"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_tokenId", "type": "uint256"}], "name": "tokenURI", "outputs": [{"internalType": "string", "name": "", "type": "string"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "totalSupply", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "pure", "type": "function"}, {"inputs": [{"internalType": "address", "name": "from", "type": "address"}, {"internalType": "address", "name": "to", "type": "address"}, {"internalType": "uint256", "name": "tokenId", "type": "uint256"}], "name": "transferFrom", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "address", "name": "newOwner", "type": "address"}], "name": "transferOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "address payable", "name": "_to", "type": "address"}, {"internalType": "uint256", "name": "_amount", "type": "uint256"}], "name": "withdraw", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"stateMutability": "payable", "type": "receive"}]',o),u=t.tokenCount,d({state:"AwaitingWalletConfirmation",tokenCount:u}),e.next=8,c.mint(n,u,{value:k.mul(u)});case 8:return p=e.sent,l=p.hash,d({state:"TransactionPending",transactionHash:l,tokenCount:u}),e.next=13,p.wait();case 13:console.log({transactionResponse:p}),d({state:"MetadataPending",transactionHash:l,tokenCount:u});case 15:return e.next=18,new Promise((function(e){return setTimeout(e,2e3)}));case 18:return e.next=20,S(c,n,l,u);case 20:if(y=e.sent,console.info({tokenIds:y}),y.length!==u){e.next=24;break}return e.abrupt("break",26);case 24:e.next=15;break;case 26:h=[],f=Object(b.a)(y),e.prev=28,f.s();case 30:if((x=f.n()).done){e.next=49;break}return g=x.value,e.next=34,c.tokenURI(g);case 34:w=e.sent;case 35:return e.next=38,_(E(w));case 38:if(null===(M=e.sent)){e.next=43;break}return h.push({tokenId:g,imageURL:E(M.image)}),console.info({tokens:h}),e.abrupt("break",47);case 43:return e.next=45,new Promise((function(e){return setTimeout(e,5e3)}));case 45:e.next=35;break;case 47:e.next=30;break;case 49:e.next=54;break;case 51:e.prev=51,e.t0=e.catch(28),f.e(e.t0);case 54:return e.prev=54,f.f(),e.finish(54);case 57:d({state:"Success",transactionHash:l,tokenCount:u,tokens:h}),r(!1),e.next=67;break;case 61:e.prev=61,e.t1=e.catch(1),console.error({exception:e.t1}),v.a(new Error(e.t1.message),{extra:{exception:e.t1}}),C="MetaMask Tx Signature: User denied transaction signature."===e.t1.message?"Transaction was rejected.":(null===(I=e.t1.error)||void 0===I?void 0:I.message)?"Minting transaction failed: ".concat(null===(A=e.t1.error)||void 0===A?void 0:A.message):e.t1.receipt&&e.t1.receipt.transactionHash?'\n                                            Minting transaction\n                                            <a href="'.concat(T(e.t1.receipt.transactionHash,"tx",i),'">').concat(e.t1.receipt.transactionHash,"</a>\n                                            failed.\n                                        "):"Minting transaction failed.",d({state:"Standby",error:C});case 67:case"end":return e.stop()}}),e,null,[[1,61],[28,51,54,57]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.values,n=e.handleChange,a=e.isSubmitting;return Object(M.jsxs)(x.a,{children:["Success"!==p.state&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("p",{children:[Object(M.jsxs)("label",{children:["How many maps do you want to mint?",Object(M.jsx)("input",{name:"tokenCount",type:"number",min:"1",max:"20",disabled:a,value:t.tokenCount,onChange:n})]}),Object(M.jsxs)("span",{children:[Object(M.jsx)("i",{className:"icon solid fa-info-circle"})," ","Each address is limited to a ",Object(M.jsx)("strong",{children:"maximum of 20\xa0maps"})," total. Each address is also limited to a ",Object(M.jsx)("strong",{children:"maximum of 3\xa0minting transactions"})," (3\xa0interactions with the mint function of the contract). We chose these limits to ensure fair and wide distribution of the maps among the community."]})]}),Object(M.jsx)("p",{children:Object(M.jsx)("button",{className:"button",type:"submit",disabled:a,children:a?"Minting...":"Mint ".concat(t.tokenCount," sphaera.digital map").concat(t.tokenCount>1?"s":""," for \u039e").concat(f.utils.formatEther(k.mul(t.tokenCount)))})})]}),Object(M.jsxs)("ul",{className:"divided",children:["Standby"===p.state&&p.error&&Object(M.jsx)("li",{children:Object(M.jsx)("div",{className:"error",dangerouslySetInnerHTML:{__html:p.error}})}),"AwaitingWalletConfirmation"===p.state&&Object(M.jsx)("li",{children:"\u23f3 1/3 Please confirm the transaction in MetaMask..."}),C(p,"AwaitingWalletConfirmation")&&Object(M.jsx)("li",{children:"\u2714 1/3 Transaction confirmed in MetaMask"}),"TransactionPending"===p.state&&Object(M.jsxs)("li",{children:["\u23f3 2/3 Mint transaction is pending..."," ",Object(M.jsx)("a",{href:T(p.transactionHash,"tx",i),target:"_blank",rel:"noreferrer noopener",children:"View on Etherscan"})]}),C(p,"TransactionPending")&&Object(M.jsxs)("li",{children:["\u2714 2/3 Token",p.tokenCount>1?"s":""," successfully minted"," ",Object(M.jsx)("a",{href:T(p.transactionHash,"tx",i),target:"_blank",rel:"noreferrer noopener",children:"View on Etherscan"})]}),"MetadataPending"===p.state&&Object(M.jsx)("li",{children:"\u23f3 3/3 Awaiting map reveal..."}),C(p,"MetadataPending")&&Object(M.jsxs)("li",{children:["\u2714 3/3 Map",p.tokenCount>1?"s":""," revealed"]})]}),"Success"===p.state&&Object(M.jsxs)("div",{className:"success",children:[Object(M.jsx)("hr",{}),Object(M.jsxs)("header",{children:[Object(M.jsxs)("h3",{children:["Congratulations! You have minted sphaera.digital map",p.tokens.length>1?"s ":" ",p.tokens.map((function(e){return"#".concat(e.tokenId)})).join(", ")]}),Object(M.jsxs)("a",{className:"button",target:"_blank",rel:"noreferrer",href:A(p.tokens,i),children:[Object(M.jsx)("i",{className:"icon brands fa-twitter"})," ","Tweet this"]})]}),Object(M.jsx)("div",{className:"row",children:p.tokens.map((function(e){return Object(M.jsx)("div",{className:"col-6 col-12-small",children:Object(M.jsxs)("section",{className:"box",children:[Object(M.jsx)("div",{className:"image featured",children:Object(M.jsx)("a",{href:"".concat(w).concat(e.tokenId),target:"_blank",children:Object(M.jsx)("img",{src:e.imageURL,alt:""})})}),Object(M.jsx)("div",{children:Object(M.jsxs)("a",{href:"".concat(w).concat(e.tokenId),target:"_blank",children:["atlas.sphaera.digital/",e.tokenId]})})]})},String(e.tokenId))}))})]})]})}})]})})]})},F=function(e){return Object(M.jsx)(R,{})},P=Object(c.b)((function(e){return{}}),{})(F),H=n(54),D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_LEFT_MENU":return t.visible;default:return e}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_ACCOUNT":return t.account;default:return e}},W=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DARK_MODE":return t.active;default:return e}},B=Object(H.combineReducers)({showLeftMenu:D,activeAccount:U,darkMode:W}),L=n(153),V=n(188),K=n.n(V),Y=n(189),J=n.n(Y),X=n(190),q={key:"root",storage:J.a,blacklist:[],stateReconciler:K.a},z=Object(L.a)(q,B),G=Object(H.createStore)(z,Object(X.composeWithDevTools)()),Q=G,Z=(Object(L.b)(G),Q),$={readOnlyChainId:u.ChainId.Mainnet,readOnlyUrls:(g={},Object(a.a)(g,u.ChainId.Mainnet,"https://mainnet.infura.io/v3/".concat("dad448afc6da4645ae1879b56aa06cce")),Object(a.a)(g,u.ChainId.Rinkeby,"https://rinkeby.infura.io/v3/".concat("0325d8506ba944b8ba0ad25a3b131b7f")),g)};p.a({dsn:"https://6bd766ad581a4c58b5953b49f91b71f1@o1080836.ingest.sentry.io/6087297",integrations:[new d.a.BrowserTracing],tracesSampleRate:1}),o.a.render(Object(M.jsx)(i.a.StrictMode,{children:Object(M.jsx)(c.a,{store:Z,children:Object(M.jsx)(u.DAppProvider,{config:$,children:Object(M.jsx)(P,{})})})}),document.getElementById("root"))}},[[266,1,2]]]);
//# sourceMappingURL=main.5fecc050.chunk.js.map